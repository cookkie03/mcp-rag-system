# RAG System - Configurazione Centralizzata

# ===== PERCORSI =====
documents_path: "./data"

# ===== EMBEDDING MODEL =====
embedding_model: "jinaai/jina-embeddings-v3"
embedding_dimension: 1024
embedding_task_passage: "retrieval.passage"
embedding_task_query: "retrieval.query"
trust_remote_code: true

# ===== CHUNKING =====
chunk_size: 1024
chunk_overlap: 200
chunking_mode: "sentence" # "sentence" (semantico) o "character" (legacy)
min_text_length: 50

# ===== QDRANT =====
# Modalit√†: "http" (Docker/server) o "local" (embedded, singolo processo)
qdrant_mode: "http"
qdrant_host: "localhost"
qdrant_port: 6333
qdrant_collection: "documents"
# Path locale (usato solo se qdrant_mode: "local")
vectorstore_path: "./qdrant_storage"

# ===== RICERCA =====
top_k: 10
similarity_threshold: 0.7 # Threshold base (fallback se adattivo disabilitato)
adaptive_threshold: true # Abilita threshold adattivo basato su GAP analysis
adaptive_threshold_min: 0.5 # Minimo threshold adattivo
adaptive_threshold_max: 0.9 # Massimo threshold adattivo

# ===== RERANKING =====
rerank_enabled: true # true per attivare cross-encoder reranking
rerank_model: "cross-encoder/ms-marco-MiniLM-L-6-v2" # Modello leggero e veloce
rerank_top_n: 30 # Candidati da recuperare per reranking
rerank_alpha: 0.4 # Peso vector_score in hybrid (0=solo rerank, 1=solo vector)

# ===== LLM (per chat.py) =====
model: "gemini-3-pro-preview"
temperature: 0.2
max_tokens: 2048

# ===== AUDIO (WHISPER) =====
whisper_model: "turbo"

# ===== PDF EXTRACTION =====
# "layout" = analisi avanzata (blocchi, colonne, tabelle con bbox)
# "markdown" = pymupdf4llm (tabelle/struttura)
# "text" = solo testo lineare (legacy)
pdf_extraction_mode: "layout"

# ===== PROCESSING =====
hash_buffer_size: 8192

# ===== FILE EXTENSIONS =====
extensions:
  text:
    - ".txt"
    - ".md"
    - ".py"
    - ".js"
    - ".ts"
    - ".json"
    - ".yaml"
    - ".yml"
    - ".xml"
    - ".html"
    - ".htm"
    - ".css"
    - ".csv"
    - ".log"
    - ".java"
    - ".cpp"
    - ".c"
    - ".cs"
    - ".go"
    - ".rb"
    - ".php"
    - ".sh"
    - ".bash"
    - ".sql"
  pdf:
    - ".pdf"
  audio:
    - ".mp3"
    - ".m4a"
    - ".opus"
    - ".wav"
    - ".ogg"
    - ".flac"
  notebook:
    - ".ipynb"
  excel:
    - ".xlsx"
